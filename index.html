<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chúc Mừng 20/10</title>
    <style>
      /*
         * CHÂN DUNG (PERSONA): UI Engineer Cao cấp
         * PHONG CÁCH: Hiện đại & Đáng yêu (Modern & Cute)
         * KỸ THUẬT: CSS Variables, Flexbox, CSS Animations (Keyframes), Transitions.
         */

      /* --- 1. Biến CSS & Thiết lập Chung --- */
      :root {
        --primary-pink: #ffc0cb; /* Hồng nhạt (cute) */
        --primary-red: #e91e63; /* Hồng đậm/Đỏ (chủ đạo) */
        --light-pink: #fde7ea; /* Hồng rất nhạt (nền thư) */
        --white: #ffffff;
        --grey: #f0f0f0; /* Màu giấy */
        --dark-grey: #555; /* Màu chữ */
        --shadow: rgba(0, 0, 0, 0.1);
        --duration-fast: 0.5s;
        --duration-slow: 0.7s;
      }

      *,
      *::before,
      *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        display: grid; /* Sử dụng Grid để căn giữa hoàn hảo */
        place-items: center;
        min-height: 100vh;
        background: linear-gradient(
          135deg,
          var(--white) 0%,
          var(--light-pink) 100%
        );
        overflow: hidden; /* Ẩn các trái tim bay ra khỏi màn hình */
        position: relative;
        color: var(--dark-grey);
      }

      /* --- 2. Hiệu ứng Nền (Trái tim bay) --- */
      /* * Sử dụng 10 phần tử tĩnh, mỗi phần tử được gán animation
         * và vị trí ngẫu nhiên để tối ưu hiệu suất (Pure CSS).
         */
      .heart-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none; /* Cho phép click xuyên qua */
        z-index: 0;
      }

      .heart {
        position: absolute;
        bottom: -20px; /* Bắt đầu từ bên dưới */
        animation: flyUp 10s linear infinite;
      }

      /* Vẽ hình trái tim bằng CSS */
      .heart::before,
      .heart::after {
        content: "";
        position: absolute;
        width: 10px;
        height: 16px; /* Chiều cao lớn hơn chiều rộng */
        background: var(--primary-pink);
        border-radius: 10px 10px 0 0;
        opacity: 0.7;
      }

      .heart::before {
        transform: rotate(-45deg);
      }

      .heart::after {
        left: 5px; /* Dịch chuyển để tạo hình trái tim */
        transform: rotate(45deg);
      }

      /* Keyframes cho trái tim bay */
      @keyframes flyUp {
        0% {
          transform: translateY(0) scale(0.5);
          opacity: 0.8;
        }
        100% {
          transform: translateY(-110vh) scale(1); /* Bay cao hơn viewport */
          opacity: 0;
        }
      }

      /* Phân bổ ngẫu nhiên vị trí, delay và kích thước */
      .heart:nth-child(1) {
        left: 10%;
        animation-delay: 0s;
        transform: scale(0.8);
      }
      .heart:nth-child(2) {
        left: 20%;
        animation-delay: 2s;
        transform: scale(1.1);
      }
      .heart:nth-child(3) {
        left: 30%;
        animation-delay: 4s;
        transform: scale(0.7);
      }
      .heart:nth-child(4) {
        left: 40%;
        animation-delay: 1s;
        transform: scale(0.9);
      }
      .heart:nth-child(5) {
        left: 50%;
        animation-delay: 3s;
        transform: scale(1);
      }
      .heart:nth-child(6) {
        left: 60%;
        animation-delay: 5s;
        transform: scale(0.8);
      }
      .heart:nth-child(7) {
        left: 70%;
        animation-delay: 0.5s;
        transform: scale(1.2);
      }
      .heart:nth-child(8) {
        left: 80%;
        animation-delay: 2.5s;
        transform: scale(0.7);
      }
      .heart:nth-child(9) {
        left: 90%;
        animation-delay: 1.5s;
        transform: scale(0.9);
      }
      .heart:nth-child(10) {
        left: 5%;
        animation-delay: 3.5s;
        transform: scale(1);
      }

      /* --- 3. Phong bì & Lá thư (Thành phần chính) --- */

      /* * Đây là thành phần chính, xử lý logic click và chứa các phần tử con.
         * z-index: 10 để nổi lên trên nền trái tim.
         */
      .envelope-wrapper {
        position: relative;
        width: 550px;
        height: 400px;
        cursor: pointer;
        z-index: 10;
        transition: all var(--duration-slow) ease-in-out;
        margin: auto;
      }

      /* Thân phong bì (mặt sau) */
      .envelope {
        position: absolute;
        width: 100%;
        height: 100%;
        background: var(--primary-pink);
        border-radius: 8px;
        box-shadow: 0 4px 15px var(--shadow);
        /* Tạo nếp gấp tam giác bên trái và phải */
        &::before,
        &::after {
          content: "";
          position: absolute;
          width: 0;
          height: 0;
          border-style: solid;
          top: 0;
        }
        /* Nếp gấp trái */
        &::before {
          left: 0;
          border-width: 100px 0 100px 150px;
          border-color: transparent transparent transparent var(--primary-red);
          opacity: 0.8;
        }
        /* Nếp gấp phải */
        &::after {
          right: 0;
          border-width: 100px 150px 100px 0;
          border-color: transparent var(--primary-red) transparent transparent;
          opacity: 0.8;
        }
      }

      /* Nắp phong bì (sẽ lật) */
      .flap {
        position: absolute;
        width: 100%;
        height: 100%;
        /* Vẽ hình tam giác bằng clip-path */
        clip-path: polygon(0 0, 100% 0, 50% 60%);
        background: var(--primary-red);
        top: 0;
        left: 0;
        transform-origin: top center; /* Lật từ cạnh trên */
        transition: transform var(--duration-fast) ease-in-out;
        z-index: 15;
      }

      /* Lá thư (ẩn bên trong) */
      .letter {
        position: absolute;
        top: 10px; /* Hở 1 chút ở trên */
        left: 10px;
        right: 10px;
        bottom: 10px;
        background: var(--grey);
        padding: 20px;
        border-radius: 6px;
        box-shadow: 0 2px 10px var(--shadow) inset;
        z-index: 5; /* Nằm dưới nắp, trên thân */

        /* Trạng thái ban đầu: Bị ẩn */
        transform: translateY(0);
        opacity: 0;
        transition: transform var(--duration-slow) ease-in-out,
          opacity var(--duration-fast);
        /* Delay cho lá thư: Chỉ trượt ra SAU KHI nắp đã mở */
        transition-delay: 0s;
      }

      .letter p {
        font-size: 1rem;
        line-height: 1.6;
      }

      .letter .signature {
        text-align: right;
        margin-top: 20px;
        font-style: italic;
        color: rgb(43, 42, 42);
      }

      /* --- 4. Trạng thái "Mở" (Kích hoạt bằng JS) --- */

      /* Khi .envelope-wrapper có class 'open' */
      .envelope-wrapper.open .flap {
        /* Lật nắp 180 độ */
        transform: rotateX(180deg);
        z-index: 1;
        transition-delay: 0s;
      }

      .envelope-wrapper.open .letter {
        transform: translateY(-120px);
        opacity: 1;
        z-index: 20; /* Nổi lên trên cùng */
        transition-delay: var(--duration-fast);
      }

      /* Thay đổi kích thước phong bì khi mở để lá thư nổi bật */
      .envelope-wrapper.open {
        height: 250px; /* Tăng chiều cao để chứa lá thư */
      }

      /* --- 5. Responsive --- */
      @media (max-width: 400px) {
        .envelope-wrapper {
          width: 280px;
          height: 187px;
        }

        .envelope-wrapper.open {
          height: 230px;
        }

        .envelope-wrapper.open .letter {
          transform: translateY(-110px);
        }

        .letter p {
          font-size: 0.9rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="heart-container">
      <div class="heart"></div>
    </div>

    <div class="envelope-wrapper" id="envelope">
      <div class="letter">
        <p>Nhân ngày 20/10,</p>
        <p>
          Chúc cho một nửa thế giới luôn rạng rỡ, hạnh phúc , học giỏi và gặt
          hái được nhiều thành công trong công việc cũng như cuộc sống.Và hơn
          hết anh chúc em biết yêu thương chăm sóc bản thân mình thật tốt nho !
        </p>
        <p>Happy Vietnamese Women's Day!</p>
        <p class="signature">
          Nguyễn Hữu Văn Trí
          <br />
          Người em iu & người iu em
        </p>
      </div>

      <div class="flap"></div>

      <div class="envelope"></div>
    </div>

    <script>
      /*
       * 3. JavaScript Tối giản (ES6)
       * Nhiệm vụ: Xử lý sự kiện click để thêm/xóa class "open"
       */

      // Lấy phần tử phong bì
      const envelope = document.getElementById("envelope");

      // Thêm trình nghe sự kiện 'click'
      envelope.addEventListener("click", () => {
        // Thêm hoặc xóa class 'open' khi click
        // Dùng toggle() cho phép đóng/mở, nếu chỉ muốn mở 1 lần, dùng classList.add('open')
        envelope.classList.toggle("open");

        for (let i = 30; i <= 100; i++) {
          const heart = document.createElement("div");
          heart.classList.add("heart");
          heart.style.left = Math.random() * 100 + "%";
          heart.style.animationDelay = Math.random() * 10 + "s";
          heart.style.transform = "scale(" + (Math.random() + 0.5) + ")";
          document.querySelector(".heart-container").appendChild(heart);
        }
      });
    </script>
  </body>
</html>
